/* shadcn-packaged includes @import "tailwindcss" */
@import "shadcn-packaged/index.css";
@import "react-day-picker/style.css";

/* Source detection for Tailwind to scan shadcn-packaged components */
@source "../node_modules/shadcn-packaged";

/* Fix destructive variant text color in light mode (shadcn bug) */
:root {
  --destructive-foreground: oklch(0.985 0 0); /* White text on red background */
}

/* Lighter dark theme - grey instead of pure black */
.dark {
  --background: oklch(0.23 0.005 260); /* Lighter grey background */
  --foreground: oklch(0.95 0 0);
  --card: oklch(0.26 0.005 260); /* Slightly lighter than background */
  --card-foreground: oklch(0.95 0 0);
  --popover: oklch(0.28 0.005 260);
  --popover-foreground: oklch(0.95 0 0);
  --primary: oklch(0.95 0 0);
  --primary-foreground: oklch(0.2 0 0);
  --secondary: oklch(0.32 0.005 260);
  --secondary-foreground: oklch(0.95 0 0);
  --muted: oklch(0.30 0.005 260);
  --muted-foreground: oklch(0.65 0 0);
  --accent: oklch(0.32 0.005 260);
  --accent-foreground: oklch(0.95 0 0);
  --border: oklch(0.35 0.005 260);
  --input: oklch(0.35 0.005 260);
  --ring: oklch(0.55 0 0);
  --sidebar: oklch(0.21 0.005 260);
  --sidebar-foreground: oklch(0.95 0 0);
  --sidebar-border: oklch(0.30 0.005 260);
  --sidebar-accent: oklch(0.30 0.005 260);
  --sidebar-accent-foreground: oklch(0.95 0 0);
}

/* Custom theme overrides for trading journal */
@theme inline {
  /* Use system fonts */
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Trading-specific colors */
  --color-profit: oklch(0.75 0.18 142);
  --color-loss: oklch(0.65 0.2 25);
  --color-breakeven: oklch(0.7 0.1 250);

  /* Fix destructive foreground color */
  --color-destructive-foreground: var(--destructive-foreground);
}

/* Smooth scrolling and prevent body overflow in dashboard */
html {
  scroll-behavior: smooth;
}

html,
body {
  height: 100%;
  overflow: hidden;
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--muted);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: color-mix(in oklch, var(--muted-foreground) 30%, transparent);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklch, var(--muted-foreground) 50%, transparent);
}

/* Trading P&L colors */
.text-profit {
  color: var(--color-profit);
}

.text-loss {
  color: var(--color-loss);
}

.text-breakeven {
  color: var(--color-breakeven);
}

.bg-profit {
  background-color: var(--color-profit);
}

.bg-loss {
  background-color: var(--color-loss);
}

/* Animation for loading states */
@keyframes pulse-subtle {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-pulse-subtle {
  animation: pulse-subtle 2s ease-in-out infinite;
}

/* Dropdown, Select, Popover, and Context Menu styling */
[data-radix-popper-content-wrapper] {
  z-index: 50 !important;
}

/* Style all Radix UI popup content (dropdowns, selects, popovers, etc.) */
[role="menu"],
[role="listbox"],
[data-radix-menu-content],
[data-radix-select-content],
[data-radix-popover-content],
[data-radix-dropdown-menu-content],
[data-slot="select-content"],
[data-slot="dropdown-menu-content"],
[data-slot="popover-content"],
[data-slot="command-list"] {
  background-color: var(--popover) !important;
  color: var(--popover-foreground) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius);
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  padding: 0.25rem;
  min-width: 8rem;
  overflow: hidden;
  animation: fadeIn 0.15s ease-out;
}

/* Ensure SelectContent viewport has solid background */
[data-slot="select-viewport"],
[data-radix-select-viewport] {
  background-color: var(--popover) !important;
}

/* Target Radix Select Content directly via data attribute */
[data-radix-select-content] {
  background-color: var(--popover) !important;
}

/* Override bg-popover class to ensure it works */
.bg-popover {
  background-color: var(--popover) !important;
}

/* Dark mode shadow enhancement */
.dark [role="menu"],
.dark [role="listbox"],
.dark [data-radix-menu-content],
.dark [data-radix-select-content],
.dark [data-radix-popover-content],
.dark [data-radix-dropdown-menu-content],
.dark [data-slot="select-content"],
.dark [data-slot="dropdown-menu-content"],
.dark [data-slot="popover-content"],
.dark [data-slot="command-list"] {
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.2), 0 0 0 1px rgb(255 255 255 / 0.05);
}

/* Menu items styling */
[role="menuitem"],
[role="option"],
[data-radix-collection-item] {
  display: flex;
  align-items: center;
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border-radius: calc(var(--radius) - 2px);
  cursor: pointer;
  outline: none;
  transition: background-color 0.15s ease;
}

[role="menuitem"]:hover,
[role="menuitem"]:focus,
[role="menuitem"][data-highlighted],
[role="option"]:hover,
[role="option"]:focus,
[role="option"][data-highlighted],
[data-radix-collection-item]:hover,
[data-radix-collection-item]:focus,
[data-radix-collection-item][data-highlighted] {
  background-color: var(--accent);
  color: var(--accent-foreground);
}

/* Disabled menu items */
[role="menuitem"][data-disabled],
[role="option"][data-disabled] {
  opacity: 0.5;
  pointer-events: none;
}

/* Menu separator */
[role="separator"] {
  height: 1px;
  margin: 0.25rem -0.25rem;
  background-color: var(--border);
}

/* Fade in animation for dropdowns */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Force solid background on all portal-based content */
[data-radix-portal] > div,
[data-radix-portal] > [role="listbox"],
[data-radix-portal] > [role="menu"] {
  background-color: var(--popover) !important;
}

/* Specifically target Select components */
div[class*="SelectContent"],
div[class*="select-content"] {
  background-color: var(--popover) !important;
  backdrop-filter: none !important;
}

/* Target the actual SelectPrimitive.Content element */
[data-radix-popper-content-wrapper] > div {
  background-color: var(--popover) !important;
}

/* Confetti and celebration animations */
@keyframes confetti-fall {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

@keyframes burst {
  0% {
    transform: rotate(var(--angle, 0deg)) translateY(0) scale(1);
    opacity: 1;
  }
  100% {
    transform: rotate(var(--angle, 0deg)) translateY(-40px) scale(0);
    opacity: 0;
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
  20%, 40%, 60%, 80% { transform: translateX(2px); }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 5px currentColor, 0 0 10px currentColor;
  }
  50% {
    box-shadow: 0 0 15px currentColor, 0 0 25px currentColor;
  }
}

.animate-confetti-fall {
  animation: confetti-fall 3s ease-out forwards;
}

.animate-burst {
  animation: burst 0.6s ease-out forwards;
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

.animate-glow-pulse {
  animation: glow-pulse 1.5s ease-in-out infinite;
}

/* ============================================================================
   Recharts / Chart Styling for Dark Mode
   ============================================================================ */

/* Ensure all chart text is visible in dark mode */
.dark .recharts-cartesian-axis-tick-value,
.dark .recharts-label,
.dark .recharts-legend-item-text,
.dark .recharts-text {
  fill: var(--muted-foreground) !important;
}

/* Recharts tooltip styling for dark mode */
.dark .recharts-tooltip-wrapper .recharts-default-tooltip {
  background-color: var(--popover) !important;
  border-color: var(--border) !important;
}

.dark .recharts-tooltip-label {
  color: var(--popover-foreground) !important;
}

.dark .recharts-tooltip-item {
  color: var(--popover-foreground) !important;
}

.dark .recharts-tooltip-item-name,
.dark .recharts-tooltip-item-value {
  color: var(--popover-foreground) !important;
}

/* Grid lines in dark mode */
.dark .recharts-cartesian-grid line {
  stroke: var(--border) !important;
}

/* Reference lines */
.dark .recharts-reference-line line {
  stroke: var(--border) !important;
}

/* Axis lines */
.dark .recharts-cartesian-axis-line {
  stroke: var(--border) !important;
}

/* Legend text */
.dark .recharts-legend-wrapper text {
  fill: var(--foreground) !important;
}

/* ============================================================================
   React Day Picker Calendar Styling for Dark Mode
   ============================================================================ */

/* Override react-day-picker CSS variables for dark theme */
.rdp-root {
  --rdp-accent-color: oklch(0.95 0 0); /* Primary color (white in dark mode) */
  --rdp-accent-background-color: oklch(0.32 0.005 260); /* Accent background */
  --rdp-day-height: 36px;
  --rdp-day-width: 36px;
  --rdp-day_button-height: 32px;
  --rdp-day_button-width: 32px;
  --rdp-day_button-border-radius: 6px;
  --rdp-today-color: oklch(0.75 0.18 142); /* Green for today */
  --rdp-selected-border: 2px solid var(--rdp-accent-color);
  --rdp-outside-opacity: 0.4;
  --rdp-disabled-opacity: 0.3;
  --rdp-range_middle-background-color: oklch(0.32 0.005 260);
  --rdp-range_start-date-background-color: oklch(0.95 0 0);
  --rdp-range_end-date-background-color: oklch(0.95 0 0);
}

/* Calendar root styling */
.rdp-root {
  background-color: var(--popover);
  color: var(--popover-foreground);
  padding: 16px;
  border-radius: var(--radius);
  font-family: inherit;
  position: relative;
}

/* Month caption (header with month name) */
.rdp-month_caption {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px 0;
  margin-bottom: 0;
  height: 28px;
}

.rdp-caption_label {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--foreground);
}

/* Navigation container - positioned at top of .rdp-month */
.rdp-nav {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 36px;
  padding: 4px 0;
  z-index: 1;
}

.rdp-button_previous,
.rdp-button_next {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background-color: transparent;
  color: var(--foreground);
  transition: background-color 0.15s ease;
  cursor: pointer;
}

.rdp-button_previous:hover,
.rdp-button_next:hover {
  background-color: var(--accent);
}

.rdp-button_previous:disabled,
.rdp-button_next:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Chevron icons */
.rdp-chevron {
  width: 16px;
  height: 16px;
  fill: currentColor;
}

/* Weekday headers */
.rdp-weekdays {
  display: flex;
  margin-bottom: 4px;
}

.rdp-weekday {
  flex: 1;
  text-align: center;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--muted-foreground);
  padding: 4px 0;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Week rows */
.rdp-week {
  display: flex;
}

/* Day cells */
.rdp-day {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1px;
}

/* Day button */
.rdp-day_button {
  width: var(--rdp-day_button-width);
  height: var(--rdp-day_button-height);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--rdp-day_button-border-radius);
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--foreground);
  background-color: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.15s ease;
}

.rdp-day_button:hover:not(:disabled) {
  background-color: var(--accent);
}

.rdp-day_button:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* Today's date */
.rdp-today .rdp-day_button {
  background-color: var(--accent);
  color: var(--accent-foreground);
  font-weight: 600;
}

/* Selected day */
.rdp-selected .rdp-day_button {
  background-color: var(--primary) !important;
  color: var(--primary-foreground) !important;
  font-weight: 600;
}

/* Outside days (previous/next month) */
.rdp-outside .rdp-day_button {
  color: var(--muted-foreground);
  opacity: var(--rdp-outside-opacity);
}

/* Disabled days */
.rdp-disabled .rdp-day_button {
  opacity: var(--rdp-disabled-opacity);
  cursor: not-allowed;
}

/* Range selection styles */
.rdp-range_start .rdp-day_button,
.rdp-range_end .rdp-day_button {
  background-color: var(--primary) !important;
  color: var(--primary-foreground) !important;
}

.rdp-range_middle .rdp-day_button {
  background-color: var(--accent);
  color: var(--accent-foreground);
  border-radius: 0;
}

/* Hidden days */
.rdp-hidden {
  visibility: hidden;
}

/* Months container */
.rdp-months {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.rdp-month {
  display: flex;
  flex-direction: column;
  position: relative;
}

/* Ensure calendar takes appropriate width */
.rdp-month_grid {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

/* Dropdown styling (if used) */
.rdp-dropdown_root {
  position: relative;
}

.rdp-dropdown {
  appearance: none;
  background-color: var(--popover);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 4px 24px 4px 8px;
  font-size: 0.875rem;
  color: var(--foreground);
  cursor: pointer;
}

.rdp-dropdown:focus {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* Mobile-specific calendar styles for better touch targets */
@media (max-width: 640px) {
  :root {
    --rdp-day-height: 44px;
    --rdp-day-width: 44px;
    --rdp-day_button-height: 40px;
    --rdp-day_button-width: 40px;
  }

  .dark {
    --rdp-day-height: 44px;
    --rdp-day-width: 44px;
    --rdp-day_button-height: 40px;
    --rdp-day_button-width: 40px;
  }

  .rdp-root {
    padding: 12px;
  }

  .rdp-day_button {
    font-size: 0.9375rem;
  }

  .rdp-weekday {
    font-size: 0.75rem;
  }
}
